<div class="report-generation-container">
  <!-- Sticky Header with Navigation -->
  <div class="sticky-header">
    <div class="header-content">
      <div class="header-title">
        <h1>{{ title }}</h1>
        <p>Generate, view, and export various HRIS reports and analytics</p>
      </div>
      <div class="search-bar">
        <i class="fas fa-search search-icon"></i>
        <input type="text" placeholder="Search reports..." class="search-input">
      </div>
    </div>
    
    <!-- Navigation Shortcuts -->
    <div class="nav-shortcuts">
      <div class="shortcuts-container">
        <button class="shortcut-btn" (click)="scrollToSection('dashboard')" title="Dashboard Overview">
          <i class="fas fa-chart-dashboard"></i>
          <span>Dashboard</span>
        </button>
        <button class="shortcut-btn" (click)="scrollToSection('templates')" title="Report Templates">
          <i class="fas fa-file-alt"></i>
          <span>Templates</span>
        </button>
        <button class="shortcut-btn" (click)="scrollToSection('scheduled')" title="Scheduled Reports">
          <i class="fas fa-clock"></i>
          <span>Scheduled</span>
        </button>
        <button class="shortcut-btn" (click)="scrollToSection('alerts')" title="Alert Triggers">
          <i class="fas fa-bell"></i>
          <span>Alerts</span>
        </button>
        <button class="shortcut-btn" (click)="scrollToSection('audit')" title="Audit Trail">
          <i class="fas fa-history"></i>
          <span>Audit</span>
        </button>
        <button class="shortcut-btn" (click)="scrollToSection('rbac')" title="Access Control">
          <i class="fas fa-shield-alt"></i>
          <span>Access</span>
        </button>
        <button class="shortcut-btn" (click)="scrollToSection('reports')" title="Available Reports">
          <i class="fas fa-list"></i>
          <span>Reports</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Main View -->
  <div *ngIf="currentView === 'main'" [@fadeSlide] class="main-view">
    <!-- Dashboard Section -->
    <div id="dashboard" class="dashboard-section">
      <!-- Key Metrics -->
      <div class="metrics-grid">
        <div class="metric-card" *ngFor="let metric of keyMetrics">
          <div class="metric-icon">
            <i [class]="metric.icon"></i>
          </div>
          <div class="metric-content">
            <h3>{{ metric.label }}</h3>
            <div class="metric-value">
              <span class="number">{{ metric.value }}</span>
              <span class="trend" [class.positive]="metric.trend > 0" [class.negative]="metric.trend < 0">
                <i [class]="getTrendIcon(metric.trend)"></i>
                {{ metric.trend }}%
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Module Activities -->
      <div class="dashboard-row">
        <div class="dashboard-card module-activities">
          <h2>Module Activities</h2>
          <div class="activity-list">
            <div class="activity-item" *ngFor="let activity of moduleActivities">
              <div class="activity-header">
                <span class="module-name">{{ activity.module }}</span>
                <span class="status-badge" [style.background]="getStatusColor(activity.status)">
                  {{ activity.status }}
                </span>
              </div>
              <div class="activity-details">
                <span class="active-users">
                  <i class="fas fa-user-circle"></i>
                  {{ activity.activeUsers }} active users
                </span>
                <span class="last-activity">
                  <i class="fas fa-history"></i>
                  Last activity: {{ formatDate(activity.lastActivity) }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Department Overview -->
        <div class="dashboard-card department-overview">
          <h2>Department Overview</h2>
          <div class="department-list">
            <div class="department-item" *ngFor="let dept of departmentMetrics">
              <div class="department-header">
                <span class="department-name">{{ dept.name }}</span>
                <span class="completion-rate">{{ dept.completionRate }}%</span>
              </div>
              <div class="department-stats">
                <span class="stat">
                  <i class="fas fa-users"></i>
                  {{ dept.employeeCount }} employees
                </span>
                <span class="stat">
                  <i class="fas fa-tasks"></i>
                  {{ dept.activeRequests }} active requests
                </span>
              </div>
              <div class="progress-bar">
                <div class="progress" [style.width.%]="dept.completionRate"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Role Distribution -->
        <div class="dashboard-card role-distribution">
          <h2>Role Distribution</h2>
          <div class="role-list">
            <div class="role-item" *ngFor="let role of roleDistribution">
              <div class="role-header">
                <span class="role-name">{{ role.role }}</span>
                <span class="role-count">{{ role.count }}</span>
              </div>
              <div class="progress-bar">
                <div class="progress" [style.width.%]="role.percentage"></div>
              </div>
              <span class="percentage">{{ role.percentage }}%</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Template Management Section -->
    <div id="templates" class="template-management">
      <div class="section-header">
        <h2>Report Templates</h2>
        <div class="header-actions">
          <button class="btn-primary" (click)="createTemplate()">
            <i class="fas fa-plus"></i>
            Create Template
          </button>
        </div>
      </div>

      <div class="templates-grid">
        <div class="template-card" *ngFor="let template of reportTemplates">
          <div class="template-header">
            <span class="template-type">{{ template.type }}</span>
            <span class="template-status" [style.color]="getTemplateStatusColor(template.status)">
              {{ template.status }}
            </span>
          </div>
          <h3>{{ template.name }}</h3>
          <p>{{ template.description }}</p>
          <div class="template-meta">
            <span class="department">{{ template.department }}</span>
            <span class="last-modified">Modified: {{ formatDate(template.lastModified) }}</span>
          </div>
          <div class="template-actions">
            <button class="btn-icon" (click)="editTemplate(template)" title="Edit Template">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-icon" (click)="deleteTemplate(template.id)" title="Delete Template">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="section-header">
        <h2>Global Layouts</h2>
        <div class="header-actions">
          <button class="btn-primary" (click)="createLayout()">
            <i class="fas fa-plus"></i>
            Create Layout
          </button>
        </div>
      </div>

      <div class="layouts-grid">
        <div class="layout-card" *ngFor="let layout of globalLayouts">
          <div class="layout-header">
            <h3>{{ layout.name }}</h3>
            <span class="default-badge" *ngIf="layout.isDefault">Default</span>
          </div>
          <p>{{ layout.description }}</p>
          <div class="layout-meta">
            <div class="layout-specs">
              <span><i class="fas fa-file"></i> {{ layout.config.pageSize }}</span>
              <span><i class="fas fa-ruler"></i> {{ layout.config.margins }}</span>
              <span><i class="fas fa-font"></i> {{ layout.config.fontFamily }}</span>
            </div>
            <div class="color-scheme">
              <div class="color-dot" *ngFor="let color of layout.config.colorScheme"
                   [style.background-color]="color"></div>
            </div>
          </div>
          <div class="layout-actions">
            <button class="btn-icon" (click)="editLayout(layout)" title="Edit Layout">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-icon" (click)="deleteLayout(layout.id)" title="Delete Layout">
              <i class="fas fa-trash"></i>
            </button>
            <button class="btn-icon" (click)="setDefaultLayout(layout.id)" 
                    [class.active]="layout.isDefault"
                    title="Set as Default">
              <i class="fas fa-star"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scheduled Reports Section -->
    <div id="scheduled" class="scheduled-reports-section">
      <div class="section-header">
        <h2>Scheduled Reports</h2>
        <div class="header-actions">
          <button class="btn-primary" (click)="createScheduledReport()">
            <i class="fas fa-plus"></i>
            Create Schedule
          </button>
        </div>
      </div>

      <div class="scheduled-reports-grid">
        <div class="scheduled-report-card" *ngFor="let report of scheduledReports">
          <div class="report-header">
            <div class="report-info">
              <h3>{{ report.name }}</h3>
              <span class="report-type">{{ report.reportType }}</span>
            </div>
            <div class="status-badge" [class]="report.status">
              {{ report.status }}
            </div>
          </div>
          
          <p class="description">{{ report.description }}</p>
          
          <div class="schedule-info">
            <div class="schedule-item">
              <i class="fas fa-clock"></i>
              <span>{{ getFrequencyLabel(report.frequency) }}</span>
            </div>
            <div class="schedule-item">
              <i class="fas fa-calendar"></i>
              <span>{{ report.schedule.hour }}:{{ report.schedule.minute.toString().padStart(2, '0') }} {{ report.schedule.timezone }}</span>
            </div>
            <div class="schedule-item">
              <i [class]="getFormatIcon(report.format)"></i>
              <span>{{ report.format.toUpperCase() }}</span>
            </div>
          </div>

          <div class="report-meta">
            <div class="meta-item">
              <span class="label">Department:</span>
              <span class="value">{{ report.department }}</span>
            </div>
            <div class="meta-item">
              <span class="label">Recipients:</span>
              <span class="value">{{ report.recipients.length }} people</span>
            </div>
            <div class="meta-item">
              <span class="label">Next Run:</span>
              <span class="value">{{ getTimeAgo(report.nextRun) }}</span>
            </div>
            <div class="meta-item" *ngIf="report.lastRun">
              <span class="label">Last Run:</span>
              <span class="value">{{ getTimeAgo(report.lastRun) }}</span>
            </div>
          </div>

          <div class="report-actions">
            <button class="btn-icon" 
                    (click)="toggleScheduledReportStatus(report)"
                    [title]="report.status === 'active' ? 'Pause Schedule' : 'Activate Schedule'">
              <i [class]="report.status === 'active' ? 'fas fa-pause' : 'fas fa-play'"></i>
            </button>
            <button class="btn-icon" 
                    (click)="runScheduledReportNow(report)"
                    title="Run Now">
              <i class="fas fa-play"></i>
            </button>
            <button class="btn-icon" 
                    (click)="editScheduledReport(report)"
                    title="Edit Schedule">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-icon" 
                    (click)="deleteScheduledReport(report.id)"
                    title="Delete Schedule">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Alert Triggers Section -->
    <div id="alerts" class="alert-triggers-section">
      <div class="section-header">
        <h2>Alert Triggers</h2>
        <div class="header-actions">
          <button class="btn-primary" (click)="createAlertTrigger()">
            <i class="fas fa-plus"></i>
            Create Alert
          </button>
        </div>
      </div>

      <div class="alert-triggers-grid">
        <div class="alert-trigger-card" *ngFor="let trigger of alertTriggers">
          <div class="trigger-header">
            <div class="trigger-info">
              <div class="trigger-icon">
                <i [class]="getAlertTypeIcon(trigger.type)" 
                   [style.color]="getSeverityColor(trigger.severity)"></i>
              </div>
              <div class="trigger-details">
                <h3>{{ trigger.name }}</h3>
                <span class="trigger-type">{{ trigger.type.replace('_', ' ') }}</span>
              </div>
            </div>
            <div class="severity-badge" [style.background-color]="getSeverityColor(trigger.severity)">
              {{ trigger.severity }}
            </div>
          </div>
          
          <p class="description">{{ trigger.description }}</p>
          
          <div class="trigger-conditions">
            <h4>Conditions:</h4>
            <div class="condition-item" *ngFor="let condition of trigger.conditions">
              <span class="field">{{ condition.field }}</span>
              <span class="operator">{{ condition.operator }}</span>
              <span class="value" *ngIf="condition.value">{{ condition.value }}</span>
              <span class="threshold" *ngIf="condition.threshold">{{ condition.threshold }}</span>
            </div>
          </div>

          <div class="trigger-meta">
            <div class="meta-item">
              <span class="label">Scope:</span>
              <span class="value">{{ trigger.scope }}</span>
            </div>
            <div class="meta-item" *ngIf="trigger.targetDepartment">
              <span class="label">Department:</span>
              <span class="value">{{ trigger.targetDepartment }}</span>
            </div>
            <div class="meta-item">
              <span class="label">Channels:</span>
              <span class="value">{{ getNotificationChannelsText(trigger.notificationChannels) }}</span>
            </div>
            <div class="meta-item">
              <span class="label">Recipients:</span>
              <span class="value">{{ trigger.recipients.length }} people</span>
            </div>
            <div class="meta-item">
              <span class="label">Triggered:</span>
              <span class="value">{{ trigger.triggerCount }} times</span>
            </div>
            <div class="meta-item" *ngIf="trigger.lastTriggered">
              <span class="label">Last Triggered:</span>
              <span class="value">{{ getTimeAgo(trigger.lastTriggered) }}</span>
            </div>
          </div>

          <div class="trigger-actions">
            <button class="btn-icon" 
                    (click)="toggleAlertTriggerStatus(trigger)"
                    [title]="trigger.status === 'active' ? 'Deactivate Alert' : 'Activate Alert'">
              <i [class]="trigger.status === 'active' ? 'fas fa-pause' : 'fas fa-play'"></i>
            </button>
            <button class="btn-icon" 
                    (click)="testAlertTrigger(trigger)"
                    title="Test Alert">
              <i class="fas fa-vial"></i>
            </button>
            <button class="btn-icon" 
                    (click)="editAlertTrigger(trigger)"
                    title="Edit Alert">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-icon" 
                    (click)="deleteAlertTrigger(trigger.id)"
                    title="Delete Alert">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Audit Trail Section -->
    <div id="audit" class="audit-trail-section">
      <div class="section-header">
        <h2>Audit Trail</h2>
        <div class="header-actions">
          <button class="btn-secondary" (click)="exportAuditTrail()">
            <i class="fas fa-download"></i>
            Export Logs
          </button>
          <button class="btn-danger" (click)="clearAuditTrail()">
            <i class="fas fa-trash"></i>
            Clear All
          </button>
        </div>
      </div>

      <!-- Audit Trail Filters -->
      <div class="audit-filters">
        <div class="filters-grid">
          <div class="filter-item">
            <label>Date Range</label>
            <select class="form-control" [(ngModel)]="auditFilters.dateRange">
              <option value="">All Time</option>
              <option value="today">Today</option>
              <option value="week">This Week</option>
              <option value="month">This Month</option>
              <option value="quarter">This Quarter</option>
            </select>
          </div>
          <div class="filter-item">
            <label>Department</label>
            <select class="form-control" [(ngModel)]="auditFilters.department">
              <option value="">All Departments</option>
              <option value="HR">Human Resources</option>
              <option value="Finance">Finance</option>
              <option value="IT">IT Department</option>
              <option value="Operations">Operations</option>
            </select>
          </div>
          <div class="filter-item">
            <label>Action</label>
            <select class="form-control" [(ngModel)]="auditFilters.action">
              <option value="">All Actions</option>
              <option value="generated">Generated</option>
              <option value="exported">Exported</option>
              <option value="printed">Printed</option>
              <option value="deleted">Deleted</option>
              <option value="modified">Modified</option>
            </select>
          </div>
          <div class="filter-item">
            <label>Status</label>
            <select class="form-control" [(ngModel)]="auditFilters.status">
              <option value="">All Status</option>
              <option value="success">Success</option>
              <option value="failed">Failed</option>
              <option value="pending">Pending</option>
            </select>
          </div>
          <div class="filter-item">
            <label>Report Type</label>
            <select class="form-control" [(ngModel)]="auditFilters.reportType">
              <option value="">All Types</option>
              <option value="employee">Employee</option>
              <option value="payroll">Payroll</option>
              <option value="attendance">Attendance</option>
              <option value="leave">Leave</option>
              <option value="performance">Performance</option>
            </select>
          </div>
          <div class="filter-item">
            <button class="btn-primary" (click)="filterAuditTrails()">
              <i class="fas fa-filter"></i>
              Apply Filters
            </button>
          </div>
        </div>
      </div>

      <!-- Audit Trail Table -->
      <div class="audit-table">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Action</th>
                <th>Report Name</th>
                <th>Generated By</th>
                <th>Department</th>
                <th>Date & Time</th>
                <th>Status</th>
                <th>File Size</th>
                <th>Downloads</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let audit of auditTrails">
                <td>
                  <div class="action-cell">
                    <i [class]="getActionIcon(audit.action)" 
                       [style.color]="getActionColor(audit.action)"></i>
                    <span class="action-text">{{ audit.action }}</span>
                  </div>
                </td>
                <td>
                  <div class="report-info">
                    <span class="report-name">{{ audit.reportName }}</span>
                    <span class="report-type">{{ audit.reportType }}</span>
                  </div>
                </td>
                <td>
                  <div class="user-info">
                    <span class="user-email">{{ audit.generatedBy }}</span>
                    <span class="ip-address">{{ audit.ipAddress }}</span>
                  </div>
                </td>
                <td>
                  <span class="department-badge">{{ audit.department }}</span>
                </td>
                <td>
                  <div class="datetime-info">
                    <span class="datetime">{{ formatDate(audit.generatedAt) }}</span>
                    <span class="time-ago">{{ getTimeAgo(audit.generatedAt) }}</span>
                  </div>
                </td>
                <td>
                  <div class="status-cell">
                    <i [class]="getStatusIcon(audit.status)" 
                       [style.color]="getStatusColor(audit.status)"></i>
                    <span class="status-text">{{ audit.status }}</span>
                  </div>
                </td>
                <td>
                  <span class="file-size">{{ audit.fileSize }}</span>
                </td>
                <td>
                  <span class="download-count">{{ audit.downloadCount }}</span>
                </td>
                <td>
                  <div class="audit-actions">
                    <button class="btn-icon" title="View Details">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn-icon" 
                            (click)="deleteAuditTrail(audit.id)"
                            title="Delete Record">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="table-footer">
          <div class="pagination">
            <button class="btn-page" disabled>
              <i class="fas fa-chevron-left"></i>
            </button>
            <span class="page-info">Page 1 of 1</span>
            <button class="btn-page" disabled>
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
          <div class="page-size">
            <span>Show:</span>
            <select class="form-control">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
            <span>entries</span>
          </div>
        </div>
      </div>
    </div>

    <!-- RBAC Management Section -->
    <div id="rbac" class="rbac-management-section">
      <!-- Sensitive Reports -->
      <div class="section-header">
        <h2>Sensitive Reports</h2>
        <div class="header-actions">
          <button class="btn-primary" (click)="createSensitiveReport()">
            <i class="fas fa-plus"></i>
            Create Report
          </button>
        </div>
      </div>

      <div class="sensitive-reports-grid">
        <div class="sensitive-report-card" *ngFor="let report of sensitiveReports">
          <div class="report-header">
            <div class="report-info">
              <div class="sensitivity-indicator">
                <i [class]="getSensitivityIcon(report.sensitivityLevel)" 
                   [style.color]="getSensitivityColor(report.sensitivityLevel)"></i>
                <span class="sensitivity-level">{{ report.sensitivityLevel }}</span>
              </div>
              <h3>{{ report.name }}</h3>
              <span class="report-category">
                <i [class]="getCategoryIcon(report.category)"></i>
                {{ report.category }}
              </span>
            </div>
            <div class="security-badges">
              <span class="badge" *ngIf="report.encryptionRequired" title="Encryption Required">
                <i class="fas fa-lock"></i>
              </span>
              <span class="badge" *ngIf="report.watermarkEnabled" title="Watermark Enabled">
                <i class="fas fa-stamp"></i>
              </span>
              <span class="badge" *ngIf="report.accessLogging" title="Access Logging">
                <i class="fas fa-clipboard-list"></i>
              </span>
            </div>
          </div>
          
          <p class="description">{{ report.description }}</p>
          
          <div class="report-details">
            <div class="detail-item">
              <span class="label">Data Fields:</span>
              <span class="value">{{ report.dataFields.length }} sensitive fields</span>
            </div>
            <div class="detail-item">
              <span class="label">Retention:</span>
              <span class="value">{{ report.retentionPolicy }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Last Modified:</span>
              <span class="value">{{ getTimeAgo(report.lastModified) }}</span>
            </div>
          </div>

          <div class="report-actions">
            <button class="btn-icon" 
                    (click)="editSensitiveReport(report)"
                    title="Edit Report">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-icon" 
                    (click)="deleteSensitiveReport(report.id)"
                    title="Delete Report">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Role Access Control -->
      <div class="section-header">
        <h2>Role Access Control</h2>
        <div class="header-actions">
          <button class="btn-primary" (click)="createRoleAccess()">
            <i class="fas fa-plus"></i>
            Assign Access
          </button>
        </div>
      </div>

      <div class="role-access-grid">
        <div class="role-access-card" *ngFor="let role of roleAccess">
          <div class="role-header">
            <div class="role-info">
              <h3>{{ role.roleName }}</h3>
              <p>{{ role.roleDescription }}</p>
            </div>
            <div class="status-badge" [class]="role.status">
              {{ role.status }}
            </div>
          </div>
          
          <div class="permissions-section">
            <h4>Permissions:</h4>
            <div class="permissions-list">
              <span class="permission" *ngFor="let perm of getPermissionsText(role.permissions).split(', ')">
                {{ perm }}
              </span>
            </div>
          </div>

          <div class="restrictions-section">
            <h4>Restrictions:</h4>
            <p class="restrictions-text">{{ getRestrictionsText(role.restrictions) }}</p>
          </div>

          <div class="role-meta">
            <div class="meta-item">
              <span class="label">Assigned Reports:</span>
              <span class="value">{{ role.assignedReports.length }} reports</span>
            </div>
            <div class="meta-item">
              <span class="label">Assigned By:</span>
              <span class="value">{{ role.assignedBy }}</span>
            </div>
            <div class="meta-item">
              <span class="label">Assigned:</span>
              <span class="value">{{ getTimeAgo(role.assignedAt) }}</span>
            </div>
            <div class="meta-item" *ngIf="role.expiresAt">
              <span class="label">Expires:</span>
              <span class="value">{{ getTimeAgo(role.expiresAt) }}</span>
            </div>
          </div>

          <div class="role-actions">
            <button class="btn-icon" 
                    (click)="editRoleAccess(role)"
                    title="Edit Access">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-icon" 
                    (click)="revokeRoleAccess(role)"
                    title="Revoke Access">
              <i class="fas fa-ban"></i>
            </button>
            <button class="btn-icon" 
                    (click)="deleteRoleAccess(role.id)"
                    title="Delete Role">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Access Requests -->
      <div class="section-header">
        <h2>Access Requests</h2>
        <p>Review and manage access requests for sensitive reports</p>
      </div>

      <div class="access-requests-table">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Requester</th>
                <th>Report</th>
                <th>Permissions</th>
                <th>Reason</th>
                <th>Urgency</th>
                <th>Status</th>
                <th>Requested</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let request of accessRequests">
                <td>
                  <div class="requester-info">
                    <span class="requester-name">{{ request.requester }}</span>
                    <span class="requester-role">{{ request.requesterRole }}</span>
                    <span class="requester-dept">{{ request.requesterDepartment }}</span>
                  </div>
                </td>
                <td>
                  <span class="report-name">{{ request.reportName }}</span>
                </td>
                <td>
                  <div class="permissions-badges">
                    <span class="permission-badge" *ngFor="let perm of request.requestedPermissions">
                      {{ perm }}
                    </span>
                  </div>
                </td>
                <td>
                  <span class="reason">{{ request.reason }}</span>
                </td>
                <td>
                  <span class="urgency-badge" [style.background-color]="getUrgencyColor(request.urgency)">
                    {{ request.urgency }}
                  </span>
                </td>
                <td>
                  <span class="status-badge" [style.background-color]="getStatusColor(request.status)">
                    {{ request.status }}
                  </span>
                </td>
                <td>
                  <span class="requested-date">{{ getTimeAgo(request.requestedAt) }}</span>
                </td>
                <td>
                  <div class="request-actions">
                    <button class="btn-icon" 
                            (click)="viewAccessRequest(request)"
                            title="View Details">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn-icon" 
                            *ngIf="request.status === 'pending'"
                            (click)="approveAccessRequest(request)"
                            title="Approve Request">
                      <i class="fas fa-check"></i>
                    </button>
                    <button class="btn-icon" 
                            *ngIf="request.status === 'pending'"
                            (click)="denyAccessRequest(request)"
                            title="Deny Request">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Report Features -->
    <div id="reports" class="section-header">
      <h2>Available Reports</h2>
      <p>Select a report type to generate detailed insights</p>
    </div>

    <div class="features-grid">
      <div class="feature-card" 
           *ngFor="let feature of reportFeatures" 
           (click)="navigateToReport(feature)"
           (mouseenter)="onCardHover(feature.type, true)"
           (mouseleave)="onCardHover(feature.type, false)"
           [@cardHover]="cardStates[feature.type]">
        <div class="card-content">
          <div class="feature-icon-wrapper">
            <span class="feature-icon">{{ feature.icon }}</span>
          </div>
          <h3>{{ feature.name }}</h3>
          <p>{{ feature.description }}</p>
          <button class="btn-access">
            <span>Access Report</span>
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Report View -->
  <div *ngIf="currentView !== 'main'" [@fadeSlide] class="report-interface">
    <div class="report-header">
      <button class="btn-back" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
        <span>Back to Reports</span>
      </button>
      <div class="header-content">
        <h2>{{ selectedFeature?.name }}</h2>
        <p>{{ selectedFeature?.description }}</p>
      </div>
    </div>

    <div class="report-content" *ngIf="selectedFeature">
      <div class="report-filters">
        <div class="filters-header">
          <h3>
            <i class="fas fa-filter"></i>
            Report Filters
          </h3>
          <button class="btn-clear">
            <i class="fas fa-times"></i>
            Clear Filters
          </button>
        </div>
        <div class="filters-grid">
          <div class="filter-item" *ngFor="let filter of getReportContent().filters">
            <label>{{ filter }}</label>
            <div class="select-wrapper">
              <select class="form-control">
                <option value="">Select {{ filter }}</option>
              </select>
              <i class="fas fa-chevron-down"></i>
            </div>
          </div>
        </div>
      </div>

      <div class="report-table">
        <div class="table-actions">
          <div class="left-actions">
            <button class="btn-primary">
              <i class="fas fa-sync-alt"></i>
              Generate Report
            </button>
            <button class="btn-secondary">
              <i class="fas fa-file-export"></i>
              Export
            </button>
            <button class="btn-secondary">
              <i class="fas fa-print"></i>
              Print
            </button>
          </div>
          <div class="right-actions">
            <div class="view-options">
              <button class="btn-icon active">
                <i class="fas fa-table"></i>
              </button>
              <button class="btn-icon">
                <i class="fas fa-chart-bar"></i>
              </button>
              <button class="btn-icon">
                <i class="fas fa-th-large"></i>
              </button>
            </div>
          </div>
        </div>
        
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th *ngFor="let field of getReportContent().fields">
                  <div class="th-content">
                    <span>{{ field }}</span>
                    <i class="fas fa-sort"></i>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td *ngFor="let field of getReportContent().fields">
                  <div class="td-content">-</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="table-footer">
          <div class="pagination">
            <button class="btn-page" disabled>
              <i class="fas fa-chevron-left"></i>
            </button>
            <span class="page-info">Page 1 of 1</span>
            <button class="btn-page" disabled>
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
          <div class="page-size">
            <span>Show:</span>
            <select class="form-control">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
            <span>entries</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 